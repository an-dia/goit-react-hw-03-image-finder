{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/Button/Button.jsx","servises/pixabay-api.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","imgName","handleImgNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","toast","error","props","onSubmit","this","className","s","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","tags","onClick","src","alt","ImageGalleryItemImage","ImageGallery","handleClick","largeImageURL","onClose","images","map","id","LoaderSpinner","Container","color","height","width","modalRoot","document","querySelector","Modal","handleKeyDown","e","console","log","code","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","Button","allProps","style","textAlign","api","fetchImgPixabay","page","BASE_URL","KEY","fetch","then","response","ok","json","Promise","reject","Error","Status","App","status","showModal","onScroll","setTimeout","scrollTo","top","documentElement","scrollHeight","behavior","handleFormSubmit","handleClickLoadMore","prevState","toggleModal","prevProps","prevImg","nextImg","prevPage","nextPage","pixabayApi","hits","length","catch","aria-label","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1c78146e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1R5Bq\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2kqUO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2YOmC\",\"Modal\":\"Modal_Modal__3FY84\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3924r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Loader_Container__1_h38\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2WJG7\"};","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css'\n\nexport default class Searchbar extends Component {\n  state = {\n    imgName: '',\n  };\n\n  handleImgNameChange = event => {\n    this.setState({ imgName: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { imgName } = this.state;\n    event.preventDefault();\n\n    if (imgName.trim() === '') {\n      return toast.error('Please, add name pokemon!');\n    }\n\n    this.props.onSubmit(imgName);\n    this.setState({ imgName: '' });\n  };\n\n  render() {\n    const { imgName } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={imgName}\n            onChange={this.handleImgNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ webformatURL, tags, onClick }) => (\n  <li className={s.ImageGalleryItem} onClick={onClick}>\n    <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\n  </li>\n);\n\nImageGalleryItem.propTypes = {\n  key: PropTypes.string,\n  webformatURL: PropTypes.string,\n  tags: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends Component {\n  static propTypes={\nimages: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string,\n    }),\n  ).isRequired,\n  onClose: PropTypes.func.isRequired,\n  }\n\n  handleClick = (largeImageURL) => {\n\t\tthis.props.onClose(largeImageURL);\n\t};\n  render() {\n    const { images } = this.props;\n    return (<ul className={s.ImageGallery}>\n      {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n        <ImageGalleryItem\n          key={id}\n          webformatURL={webformatURL}\n          tags={tags}\n          onClick={() => this.handleClick(largeImageURL)}\n        />))\n  }\n    </ul>)\n  };\n};\n\n\nexport default ImageGallery;\n\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nimport { Component } from 'react';\n\nexport default class LoaderSpinner extends Component {\n  state = {};\n  render() {\n    return (\n      <div className={s.Container}>\n        <Loader  type=\"BallTriangle\" color=\"#00BFFF\" height={60} width={60} />\n      </div>\n    );\n  }\n}\n\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    console.log(e.code);\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    console.log(e.currentTarget);\n    console.log(e.target);\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          {this.props.children}\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css'\n\nconst Button = ({ onClick, ...allProps }) => {\n  return (\n    <div style={{textAlign: 'center'}}>\n       <button className={s.Button} type=\"button\" onClick={onClick} {...allProps}>\n      Load more\n    </button>\n   </div>\n  );\n};\n\n// Button.defaultProps = {\n//   onClick: () => null,\n//   children: null,\n// }\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  'aria-label': PropTypes.string.isRequired,\n};\n\nexport default Button;\n","function fetchImgPixabay(imgName, page = '1') {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const KEY = '19252909-b3fce789e9067414046d74c47';\n\n  return fetch(`${BASE_URL}?q=${imgName}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`).then(\n    response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(new Error(`Oh my god, everything is gone !!!`));\n    },\n  );\n}\n\nconst api = {\n  fetchImgPixabay,\n};\n\nexport default api;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport LoaderSpinner from './components/Loader';\nimport Modal from './components/Modal';\nimport Button from './components/Button';\nimport pixabayApi from './servises/pixabay-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default class App extends Component {\n  state = {\n    imgName: '',\n    images: [],\n    error: null,\n    status: Status.IDLE,\n    page: 1,\n    largeImageURL: '',\n    showModal: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevImg = prevState.imgName;\n    const nextImg = this.state.imgName;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevImg !== nextImg ) {\n      this.setState({ status: Status.PENDING });\n     \n      pixabayApi\n        .fetchImgPixabay(nextImg)\n        .then(images => {\n           if (images.hits.length === 0) {\n          return this.setState({\n            error: `Could not find picture for request ${nextImg}`,\n            status: Status.REJECTED,\n          });\n        }\n          this.setState({\n            images: images.hits,\n            status: Status.RESOLVED,\n          })\n        }\n        )\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n      // this.resetPage();\n    }\n\n    if (prevPage !== nextPage) {\n      this.setState({ status: Status.PENDING });\n      pixabayApi\n        .fetchImgPixabay(nextImg, nextPage)\n        .then(images => {\n          this.setState(prevState => ({\n            images: [...prevState.images, ...images.hits],\n            status: Status.RESOLVED,\n          }));\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }\n  }\n  \n  \n\n  onScroll = () => {\n    setTimeout(() => {\n     window.scrollTo({\n  top: document.documentElement.scrollHeight,\n  behavior: 'smooth',\n});\n    }, 1000);\n  }\n\n  handleFormSubmit = imgName => {\n    this.setState({ imgName });\n  };\n\n  handleClickLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n    \n    this.onScroll();\n  };\n\n  toggleModal = (largeImageURL) => {\n    this.setState(({ showModal}) => ({\n      showModal: !showModal,\n    }));\n     this.setState({largeImageURL: largeImageURL})\n    \n  }\n\n  // resetPage = () => {\n  //   this.setState({ page: 1 });\n  // }\n  \n\n  render() {\n    const { images, status, showModal, largeImageURL, error } = this.state;\n    return (\n      <div >\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {status === Status.RESOLVED && images.length !== 0 &&\n          <ImageGallery images={images} onClose={this.toggleModal} />}\n        {status === Status.PENDING && <LoaderSpinner />}\n        {status === Status.RESOLVED && images.length !== 0 && (\n          <Button onClick={this.handleClickLoadMore} aria-label=\"Найти картинку\" />\n        )}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}> \n            <img src={largeImageURL} alt={images.tags} />\n          </Modal>\n        )}\n        {status === Status.REJECTED && <div style={{textAlign: 'center', color: 'red'}}><p>{error}</p></div>}\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__14HQ3\",\"SearchForm\":\"Searchbar_SearchForm__1lzYL\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3lcOZ\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__QTbtG\",\"SearchFormInput\":\"Searchbar_SearchFormInput__20bjZ\"};"],"sourceRoot":""}