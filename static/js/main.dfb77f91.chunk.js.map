{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/Button/Button.jsx","servises/pixabay-api.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","imgName","handleImgNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","toast","error","props","onSubmit","this","className","s","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","tags","onClick","src","alt","ImageGalleryItemImage","ImageGallery","handleClick","largeImageURL","onClose","images","map","id","LoaderSpinner","Container","color","height","width","modalRoot","document","querySelector","Modal","handleKeyDown","e","console","log","code","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","Button","allProps","style","textAlign","api","fetchImgPixabay","page","BASE_URL","KEY","fetch","then","response","ok","json","Status","App","status","showModal","onScroll","scrollTo","top","documentElement","scrollHeight","behavior","handleFormSubmit","handleClickLoadMore","prevState","toggleModal","prevProps","prevImg","nextImg","prevPage","nextPage","pixabayApi","hits","length","Promise","reject","Error","catch","aria-label","message","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dfb77f91.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1R5Bq\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2kqUO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2YOmC\",\"Modal\":\"Modal_Modal__3FY84\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3924r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Loader_Container__1_h38\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2WJG7\"};","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    imgName: '',\n  };\n\n  handleImgNameChange = event => {\n    this.setState({ imgName: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { imgName } = this.state;\n    event.preventDefault();\n\n    if (imgName.trim() === '') {\n      return toast.error('Please, add name pokemon!');\n    }\n\n    this.props.onSubmit(imgName);\n    this.setState({ imgName: '' });\n  };\n\n  render() {\n    const { imgName } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={imgName}\n            onChange={this.handleImgNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ webformatURL, tags, onClick }) => (\n  <li className={s.ImageGalleryItem} onClick={onClick}>\n    <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\n  </li>\n);\n\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string,\n  tags: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number,\n        webformatURL: PropTypes.string.isRequired,\n        tags: PropTypes.string.isRequired,\n        largeImageURL: PropTypes.string,\n      }),\n    ).isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  handleClick = largeImageURL => {\n    this.props.onClose(largeImageURL);\n  };\n  render() {\n    const { images } = this.props;\n    return (\n      <ul className={s.ImageGallery}>\n        {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n          <ImageGalleryItem key={id} webformatURL={webformatURL} tags={tags} onClick={() => this.handleClick(largeImageURL)} />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nimport { Component } from 'react';\n\nexport default class LoaderSpinner extends Component {\n  state = {};\n  render() {\n    return (\n      <div className={s.Container}>\n        <Loader type=\"BallTriangle\" color=\"#00BFFF\" height={60} width={60} />\n      </div>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    console.log(e.code);\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    console.log(e.currentTarget);\n    console.log(e.target);\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick, ...allProps }) => {\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <button className={s.Button} type=\"button\" onClick={onClick} {...allProps}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\n// Button.defaultProps = {\n//   onClick: () => null,\n//   children: null,\n// }\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  'aria-label': PropTypes.string.isRequired,\n};\n\nexport default Button;\n","function fetchImgPixabay(imgName, page = '1') {\n  console.log('imgName', imgName);\n  console.log('page', page);\n  const BASE_URL = 'https://pixabay.com/api/';\n  const KEY = '19252909-b3fce789e9067414046d74c47';\n\n  return fetch(`${BASE_URL}?q=${imgName}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`)\n  .then(\n    response => {\n      // test();\n      if (response.ok) {\n        return response.json();\n      }\n      // return Promise.reject(new Error(`Oh my god, everything is gone !!!`));\n    },\n  );\n}\n\nconst api = {\n  fetchImgPixabay,\n};\n\nexport default api;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport LoaderSpinner from './components/Loader';\nimport Modal from './components/Modal';\nimport Button from './components/Button';\nimport pixabayApi from './servises/pixabay-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default class App extends Component {\n  state = {\n    imgName: '',\n    images: [],\n    error: null,\n    status: Status.IDLE,\n    page: 1,\n    largeImageURL: '',\n    showModal: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevImg = prevState.imgName;\n    const nextImg = this.state.imgName;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevImg !== nextImg) {\n      this.setState({images: [], page: 1, status: Status.PENDING });\n\n      pixabayApi\n        .fetchImgPixabay(nextImg)\n        .then(images => {\n          if (images.hits.length === 0) {\n            return Promise.reject(new Error(`Could not find picture for request ${nextImg}`));\n            // return this.setState({\n            //   error: `Could not find picture for request ${nextImg}`,\n            //   status: Status.REJECTED,\n            // });\n          }\n\n          window.scrollTo({ top: 0 });\n          this.setState({\n            images: images.hits,\n            status: Status.RESOLVED,\n          });\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n        \n      \n    }\n\n    if ( prevPage !== nextPage && nextPage > 1 ) {\n      console.log('nextPage',prevPage);\n      console.log('nextPage',nextPage);\n      this.setState({ status: Status.PENDING });\n      pixabayApi\n        .fetchImgPixabay(nextImg, nextPage)\n        .then(images => {\n          this.setState(prevState => ({\n            images: [...prevState.images, ...images.hits],\n            status: Status.RESOLVED,\n          }));\n         \n            this.onScroll()\n          \n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }))\n        // .finally(this.onScroll);\n      \n    }\n  }\n\n  onScroll = () => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n  };\n\n  handleFormSubmit = imgName => {\n    this.setState({ imgName });\n  };\n\n  handleClickLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n\n    // this.onScroll();\n  };\n\n  toggleModal = largeImageURL => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n    this.setState({ largeImageURL: largeImageURL });\n  };\n\n  // resetPage = () => {\n  //   this.setState({ page: 1 });\n  // }\n\n  render() {\n    const { images, status, showModal, largeImageURL, error } = this.state;\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {status === Status.RESOLVED && images.length !== 0 && <ImageGallery images={images} onClose={this.toggleModal} />}\n        {status === Status.PENDING && <LoaderSpinner />}\n        {status === Status.RESOLVED && images.length !== 0 && (\n          <Button onClick={this.handleClickLoadMore} aria-label=\"Найти картинку\" />\n        )}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={largeImageURL} alt={images.tags} />\n          </Modal>\n        )}\n        {status === Status.REJECTED && (\n          <div style={{ textAlign: 'center', color: 'red' }}>\n            <p>{error.message}</p>\n          </div>\n        )}\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__14HQ3\",\"SearchForm\":\"Searchbar_SearchForm__1lzYL\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3lcOZ\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__QTbtG\",\"SearchFormInput\":\"Searchbar_SearchFormInput__20bjZ\"};"],"sourceRoot":""}